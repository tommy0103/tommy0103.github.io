<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Candy Life</title>
    <link>https://tommy0103.github.io/</link>
    <description>Recent content on Candy Life</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <copyright>tommy0103，本站遵循 CC BY-NC-SA 4.0 协议</copyright>
    <lastBuildDate>Sun, 08 Aug 2021 14:50:31 +0800</lastBuildDate>
    
        <atom:link href="https://tommy0103.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    
        <item>
        <title>How to build this blog</title>
        <link>https://tommy0103.github.io/posts/buildblog/</link>
        <pubDate>Sun, 08 Aug 2021 14:50:31 +0800</pubDate>
        
        <guid>https://tommy0103.github.io/posts/buildblog/</guid>
        <description>Candy Life https://tommy0103.github.io/posts/buildblog/ -&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;
&lt;p&gt;尝试过虚拟机上 &lt;code&gt;Arch Linux&lt;/code&gt; 的部署，但是由于 &lt;code&gt;VMware workstation 12.0&lt;/code&gt; 的 bug，系统爆炸了呜呜呜。&lt;/p&gt;
&lt;p&gt;所以本文要讲的是 &lt;code&gt;Windows&lt;/code&gt; 上基于 &lt;code&gt;Git &amp;amp; Github Pages&lt;/code&gt; 的部署。&lt;/p&gt;
&lt;h3 id=&#34;quick-start&#34;&gt;Quick Start&lt;/h3&gt;
&lt;p&gt;安装 &lt;code&gt;Git Bash&lt;/code&gt;，下载 &lt;code&gt;Hugo extended Windows&lt;/code&gt;，并正确设置环境变量。&lt;/p&gt;
&lt;p&gt;选择路径 &lt;code&gt;dir&lt;/code&gt; 作为 Hugo Blog 的存储路径。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;color:#658b00&#34;&gt;cd&lt;/span&gt; dir
hugo new site .
git init
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果没有报错的话，&lt;code&gt;dir&lt;/code&gt; 内是这样的：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;archetypes/  content/    static/  config.toml  data/     
layouts/     resources/  themes/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里简要的说明一下，&lt;code&gt;themes&lt;/code&gt; 用于接下来存放选择的主题，而 &lt;code&gt;config.toml&lt;/code&gt; 是 blog 的配置文件。注意 &lt;code&gt;hugo&lt;/code&gt; 是没有默认主题的，因此需要手动选择主题。&lt;/p&gt;
&lt;p&gt;在&lt;a href=&#34;https://themes.gohugo.io/&#34;&gt;官方网站&lt;/a&gt;上选择中意的主题后 &lt;code&gt;clone&lt;/code&gt; 下来。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;git clone https://github.com/AmazingRise/hugo-theme-diary themes/diary
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;改一改配置文件，或者直接用 &lt;code&gt;themes/diary/exampleSite/config.toml&lt;/code&gt;，这里给出我的配置文件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;baseURL = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;https://tommy0103.github.io/&amp;#34;&lt;/span&gt;
DefaultContentLanguage = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;zh&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#228b22&#34;&gt;# Theme&amp;#39;s display language, supports: en, fr, zh, zh-hant&lt;/span&gt;
languageCode = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;zh-CN&amp;#34;&lt;/span&gt;
title = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Candy Life&amp;#34;&lt;/span&gt;
copyright = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;tommy0103，本站遵循 CC BY-NC-SA 4.0 协议&amp;#34;&lt;/span&gt;
theme = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;diary&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#228b22&#34;&gt;# googleAnalytics = &amp;#34;UA-154017714-2&amp;#34;&lt;/span&gt;

hasCJKLanguage = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
&lt;span style=&#34;color:#228b22&#34;&gt;# googleAnalytics = &amp;#34;UA-123-45&amp;#34;&lt;/span&gt;

[markup]
  [markup.highlight]
    codeFences = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
    guessSyntax = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;false&lt;/span&gt;
    hl_Lines = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
    lineNoStart = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;
    lineNos = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;false&lt;/span&gt;
    lineNumbersInTable = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
    noClasses = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
    style = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;perldoc&amp;#34;&lt;/span&gt;
    tabWidth = &lt;span style=&#34;color:#b452cd&#34;&gt;4&lt;/span&gt;

[params]
subtitle = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Some thinking.&amp;#34;&lt;/span&gt;
enableGitalk = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
enableMathJax = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
enableAutoDarkMode = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
enableReadingTime = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
customCSS = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
customJS = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;

&lt;span style=&#34;color:#228b22&#34;&gt;# Twitter Card and Open Graph settings&lt;/span&gt;
enableOpenGraph = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
enableTwitterCards = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
title = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Candy Life&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#228b22&#34;&gt;# will set &amp;#39;og:site_name&amp;#39;&lt;/span&gt;
description = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;My HomePage Description&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#228b22&#34;&gt;# will set &amp;#39;og:description&amp;#39;&lt;/span&gt;

[params.gitalk]
  owner = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;tommy0103&amp;#34;&lt;/span&gt;
  repo = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;blog_comment&amp;#34;&lt;/span&gt;
  client_id = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;secret&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#228b22&#34;&gt;# need your own client_id instead of &amp;#34;secret&amp;#34;&lt;/span&gt;
  client_secret = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;secret&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#228b22&#34;&gt;# need your own client_secret instead of &amp;#34;secret&amp;#34;&lt;/span&gt;
[taxonomies]
   tag = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;tags&amp;#34;&lt;/span&gt;
   sections = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;sections&amp;#34;&lt;/span&gt;
   series = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;series&amp;#34;&lt;/span&gt;
   category = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;categories&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#228b22&#34;&gt;# [[menu.main]]&lt;/span&gt;
&lt;span style=&#34;color:#228b22&#34;&gt;# url = &amp;#34;/categories/&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#228b22&#34;&gt;# name = &amp;#34;Categories&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#228b22&#34;&gt;# weight = 2&lt;/span&gt;
[[menu.main]]
url = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;/posts/&amp;#34;&lt;/span&gt;
name = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Archive&amp;#34;&lt;/span&gt;
weight = &lt;span style=&#34;color:#b452cd&#34;&gt;1&lt;/span&gt;
[[menu.main]]
url = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;/tags/&amp;#34;&lt;/span&gt;
name = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Tags&amp;#34;&lt;/span&gt;
weight = &lt;span style=&#34;color:#b452cd&#34;&gt;3&lt;/span&gt;
[[menu.main]]
url = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;/friends/&amp;#34;&lt;/span&gt;
name = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;Friends&amp;#34;&lt;/span&gt;
weight = &lt;span style=&#34;color:#b452cd&#34;&gt;4&lt;/span&gt;
[[menu.main]]
url = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;/about/&amp;#34;&lt;/span&gt;
name = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;About&amp;#34;&lt;/span&gt;
weight = &lt;span style=&#34;color:#b452cd&#34;&gt;4&lt;/span&gt;
[[menu.main]]
url = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;/index.xml&amp;#34;&lt;/span&gt;
name = &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;RSS Feed&amp;#34;&lt;/span&gt;
weight = &lt;span style=&#34;color:#b452cd&#34;&gt;6&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;还需要新建一个 .md 才能正常生成 blog&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;hugo new posts/first.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;现在可以生成 blog 了qwq。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;# Generate static site&lt;/span&gt;
hugo -D 
&lt;span style=&#34;color:#228b22&#34;&gt;# Generate &amp;amp; Preview site just in LAN &lt;/span&gt;
hugo server -D
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;接下来需要部署 blog，即将 blog 放在云服务上运行。
这里 $\texttt{tommy}$ 选择了 &lt;code&gt;Github Pages&lt;/code&gt;，你也可以选择其他的。&lt;/p&gt;
&lt;p&gt;初次部署需要 &lt;code&gt;init&lt;/code&gt; 以及新建 &lt;code&gt;origin&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;# /dir/deploy.sh&lt;/span&gt;

&lt;span style=&#34;color:#228b22&#34;&gt;# if you deploy your blog for the first time&lt;/span&gt;
git init
git remote add origin git@github.com:tommy0103/tommy0103.github.io.git

&lt;span style=&#34;color:#228b22&#34;&gt;# for all cases&lt;/span&gt;
git add .
git commit -m &lt;span style=&#34;color:#cd5555&#34;&gt;&amp;#34;msg&amp;#34;&lt;/span&gt;
git push -f --set-upstream origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;到这里部署就告一段落了。可以写一个 &lt;code&gt;.sh&lt;/code&gt; 脚本，这样每次就可以一键部署了。&lt;/p&gt;
&lt;h3 id=&#34;some-problem&#34;&gt;Some Problem&lt;/h3&gt;
&lt;p&gt;整个过程中 $\texttt{tommy}$ 遇到过很多神奇的问题，这里记录一下。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在 &lt;code&gt;git push -f ...&lt;/code&gt; 时出现 &lt;code&gt;git@github.com: Permission denied (publickey)&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;del&gt;连 &lt;code&gt;rsa&lt;/code&gt; 都没配置你在干什么（tommy：伞兵竟是我自己，senioria：tommy 傻傻配额快用完了&lt;/del&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git config --global user.name &amp;quot;&amp;quot;
git config --global user.email &amp;quot;&amp;quot;
ssh-keygen -t rsa -C &amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;拷贝公钥至 github.com/username 的 &lt;code&gt;Setting&lt;/code&gt; 中即可。
然后 &lt;code&gt;ssh -T git@github.com&lt;/code&gt; 检查是否成功。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Gitalk&lt;/code&gt; 评论区无法正常输入&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这多半不是你的问题，是浏览器的锅，换个浏览器试试吧。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Gitalk&lt;/code&gt; 显示需要初始化 &lt;code&gt;issue&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这不是 bug，这是 feature，直接使用你授权的 github 账号登录即可。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;mathJax&lt;/code&gt; 无法正常使用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个问题很好解决。&lt;/p&gt;
&lt;p&gt;首先检查是否正确的配置了 &lt;code&gt;config.toml&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span style=&#34;color:#228b22&#34;&gt;# config.toml&lt;/span&gt;
enableMathJax = &lt;span style=&#34;color:#8b008b;font-weight:bold&#34;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后查看 &lt;code&gt;themes/diary/layouts/partials/head.html&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;{{ if or .Site.Params.enableMathJax }}
  {{ partial &amp;#34;mathjax.html&amp;#34; . }}
{{ end }}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果不是这样的，改成这样。&lt;/p&gt;
&lt;p&gt;重新 &lt;code&gt;deploy&lt;/code&gt; 就可以正常渲染了。但是 &lt;code&gt;\\&lt;/code&gt; 转义的问题解决不了，所以&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-latex&#34; data-lang=&#34;latex&#34;&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;$$&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b&#34;&gt;\begin&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;{aligned}
&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;e^{i&lt;/span&gt;&lt;span style=&#34;color:#00688b&#34;&gt;\theta&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;}&lt;/span&gt;=&lt;span style=&#34;color:#00688b&#34;&gt;\cos&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#00688b&#34;&gt;\theta&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt; &lt;/span&gt;+&lt;span style=&#34;color:#658b00&#34;&gt; i &lt;/span&gt;&lt;span style=&#34;color:#00688b&#34;&gt;\sin&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#00688b&#34;&gt;\theta&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b&#34;&gt;\\\\&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;qwq
&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#00688b&#34;&gt;\end&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;{aligned}
&lt;/span&gt;&lt;span style=&#34;color:#658b00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#cd5555&#34;&gt;$$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;只能用 &lt;code&gt;\\\\&lt;/code&gt; 来起到换行的效果（悲&lt;/p&gt;
- https://tommy0103.github.io/posts/buildblog/ - tommy0103，本站遵循 CC BY-NC-SA 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>Friends</title>
        <link>https://tommy0103.github.io/friends/</link>
        <pubDate>Sun, 08 Aug 2021 11:39:24 +0800</pubDate>
        
        <guid>https://tommy0103.github.io/friends/</guid>
        <description>Candy Life https://tommy0103.github.io/friends/ -- https://tommy0103.github.io/friends/ - tommy0103，本站遵循 CC BY-NC-SA 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>About</title>
        <link>https://tommy0103.github.io/about/</link>
        <pubDate>Sun, 08 Aug 2021 11:38:58 +0800</pubDate>
        
        <guid>https://tommy0103.github.io/about/</guid>
        <description>Candy Life https://tommy0103.github.io/about/ -- https://tommy0103.github.io/about/ - tommy0103，本站遵循 CC BY-NC-SA 4.0 协议</description>
        </item>
    
    
    
        <item>
        <title>简单多项式</title>
        <link>https://tommy0103.github.io/posts/first/</link>
        <pubDate>Sun, 08 Aug 2021 10:48:38 +0800</pubDate>
        
        <guid>https://tommy0103.github.io/posts/first/</guid>
        <description>Candy Life https://tommy0103.github.io/posts/first/ -&lt;p&gt;容易想到直接枚举树&lt;/p&gt;
&lt;p&gt;$$
\sum_T\left(\prod_{i=1}^na_i^{d_i}d_i^m\right)\left(\sum_{i=1}^nd_i^m\right)
$$&lt;/p&gt;
&lt;p&gt;$$
\sum_T\sum_{i=1}^n a_i^{d_i}d_i^{2m}\prod_{j\neq i}a_j^{d_j}d_j^m
$$&lt;/p&gt;
&lt;p&gt;运用 $\mathrm{Prufer}$ 序列这一工具&lt;/p&gt;
&lt;p&gt;$$
\sum_{i=1}^n\sum_{\sum k_j=n-2}\frac{(n-2)!}{\prod k_j!}a_i^{k_i+1}(k_i+1)^{2m}\prod_{j\neq i}(a_j^{k_j+1}(k_j+1)^m)
$$&lt;/p&gt;
&lt;p&gt;$$
(n-2)!\left(\prod_{j=1}^n a_j\right)\sum_{i=1}^n\sum_{\sum k_j=n-2}\frac{a_i^{k_i}(k_i+1)^{2m}}{k_i!}\prod_{j\neq i}\frac{a_j^{k_j}(k_j+1)^m}{k_j!}
$$&lt;/p&gt;
&lt;p&gt;设&lt;/p&gt;
&lt;p&gt;$$
\begin{aligned}
\left[{z^n}\right]F_i(z)&amp;amp;=\frac{a_i^n(n+1)^{2m}}{n!}
\\&lt;br&gt;
\left[{z^n}\right]G_i(z)&amp;amp;=\frac{a_i^n(n+1)^m}{n!}
\end{aligned}
$$&lt;/p&gt;
&lt;p&gt;将非常数项写成卷积形式&lt;/p&gt;
&lt;p&gt;$$
\left[{z^{n-2}}\right]\sum_{i=1}^n\frac{F_i(z)}{G_i(z)}\left(\prod_{i=1}^nG_i(z)\right)
$$&lt;/p&gt;
&lt;p&gt;问题变为快速求解这个卷积。设&lt;/p&gt;
&lt;p&gt;$$
F(z)=\sum_{n=0} \frac{(n+1)^{2m}}{n!}z^n,G(z)=\sum_{n=0}\frac{(n+1)^m}{n!}z^n
$$&lt;/p&gt;
&lt;p&gt;则有&lt;/p&gt;
&lt;p&gt;$$
F_i(z)=F(a_iz),G_i(z)=G(a_iz)
$$&lt;/p&gt;
&lt;p&gt;现在需要考虑对于任意&lt;/p&gt;
&lt;p&gt;$$
H_i(z)=\sum_{n=0}a_i^nh_nz^n=\frac{1}{1-a_iz}
$$&lt;/p&gt;
&lt;p&gt;求解&lt;/p&gt;
&lt;p&gt;$$
\begin{aligned}
\sum_{i=1}^n H_i(z)=\sum_{i=1}^n\frac{1}{1-a_iz}
\end{aligned}
$$&lt;/p&gt;
&lt;p&gt;因为连乘项是 $H_i(z)=\ln G(a_iz)$ 并且 $\exp$ 回原式，而连加项其实是 $H_i(z)=\frac{F(a_iz)}{G(a_iz)}$。对于这两部分都只需要求一遍 $\ln G(z)$ 和 $\frac{F(z)}{G(z)}$。&lt;/p&gt;
&lt;p&gt;设&lt;/p&gt;
&lt;p&gt;$$
u=\prod_{i=1}^n (1-a_iz)
$$&lt;/p&gt;
&lt;p&gt;则所求变为&lt;/p&gt;
&lt;p&gt;$$
\frac{u&#39;}{u}
$$&lt;/p&gt;
&lt;p&gt;使用分治 $\mathrm{NTT}$ 求出 $u$ 的值即可，时间复杂度为 $O(n \log^2 n)$&lt;/p&gt;
- https://tommy0103.github.io/posts/first/ - tommy0103，本站遵循 CC BY-NC-SA 4.0 协议</description>
        </item>
    
    
  </channel>
</rss> 